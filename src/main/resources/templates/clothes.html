<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Burgos CF Store</title>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
  <link rel="stylesheet" type="text/css" href="style.css" />

  <script>
    function addToCart(productId) {
        fetch(`/add-to-cart/${productId}`, {
            method: 'POST'
        })
        .then(response => response.text())
        .then(message => {
            alert(message);
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        const buttons = document.querySelectorAll('.add_to_cart');
        buttons.forEach(button => {
            button.addEventListener('click', () => {
                const productId = button.getAttribute('data-product-id');
                addToCart(productId);
            });
        });
    });
</script>

</head>
<body>
  <div id="wrap">
    <div class="header">
      <div class="logo"><a href="index.html"><img src="images/logo.png" alt="" border="0" /></a></div>
      <div id="menu">
        <ul>
          <li><a href="index.html">INICIO</a></li>
          <li class="selected"><a href="clothes.html">ROPA</a></li>
          <li><a href="accesories.html">ACCESORIOS</a></li>
          <li><a href="myaccount.html">MI CUENTA</a></li>
          <li><a href="contact.html">CONTACTO</a></li>
          <li><a href="cart.html">CESTA</a></li>
        </ul>
      </div>
    </div>
    <div class="center_content">
      <div class="left_content">
        <div class="title"><span class="title_icon"><img src="images/bullet0.jpg" alt="" /></span>PRODUCTOS</div>
        <!-- Iterar sobre los productos -->
        <div th:each="product : ${products}">
          <div class="feat_prod_box">
            <div class="prod_img"><a href="#"><img th:src="${product.imageUrl}" alt="" border="0" /></a></div>
            <div class="prod_det_box">
              <div class="box_top"></div>
              <div class="box_center">
                <div class="prod_title" th:text="${product.name}"></div>
                <p class="details" th:text="${product.description}"></p>
                <button class="add_to_cart" th:data-product-id="${product.name}">Añadir a la cesta</button>
                <div class="clear"></div>
              </div>
              <div class="box_bottom"></div>
            </div>
            <div class="clear"></div>
          </div>
        </div>
        <div class="clear"></div>
      </div>
      <div class="right_content">
        <!-- Iterar sobre los productos -->
        <div th:each="product : ${products}">
          <div class="feat_prod_box">
            <div class="prod_img"><a href="#"><img th:src="${product.imageUrl}" alt="" border="0" /></a></div>
            <div class="prod_det_box">
              <div class="box_top"></div>
              <div class="box_center">
                <div class="prod_title" th:text="${product.name}"></div>
                <p class="details" th:text="${product.description}"></p>
                <button class="add_to_cart" th:data-product-id="${product.id}">Añadir a la cesta</button>
                <div class="clear"></div>
              </div>
              <div class="box_bottom"></div>
            </div>
            <div class="clear"></div>
          </div>
        </div>
        <div class="clear"></div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="footer">
      <div class="left_footer"><img src="images/footer_logo.gif" alt="" /><br /></div>
      <div class="right_footer">
        <a href="index.html">Inicio</a>
        <a href="clothes.html">Ropa</a>
        <a href="accesories.html">Accesorios</a>
        <a href="contact.html">Contacto</a>
      </div>
    </div>
  </div>
</body>
</html>
